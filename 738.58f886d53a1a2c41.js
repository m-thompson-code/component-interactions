"use strict";(self.webpackChunkcomponent_interactions=self.webpackChunkcomponent_interactions||[]).push([[738],{3738:(At,j,i)=>{i.r(j),i.d(j,{NgrxComponentStoreModule:()=>h});var x=i(6895),r=i(8274),T=i(9751),O=i(727);class Y extends O.w0{constructor(t,e){super()}schedule(t,e=0){return this}}const y={setInterval(s,t,...e){const{delegate:n}=y;return n?.setInterval?n.setInterval(s,t,...e):setInterval(s,t,...e)},clearInterval(s){const{delegate:t}=y;return(t?.clearInterval||clearInterval)(s)},delegate:void 0};var G=i(8737);class w extends Y{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){var n;if(this.closed)return this;this.state=t;const o=this.id,c=this.scheduler;return null!=o&&(this.id=this.recycleAsyncId(c,o,e)),this.pending=!0,this.delay=e,this.id=null!==(n=this.id)&&void 0!==n?n:this.requestAsyncId(c,this.id,e),this}requestAsyncId(t,e,n=0){return y.setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!=n&&this.delay===n&&!1===this.pending)return e;null!=e&&y.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let o,n=!1;try{this.work(t)}catch(c){n=!0,o=c||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),o}unsubscribe(){if(!this.closed){const{id:t,scheduler:e}=this,{actions:n}=e;this.work=this.state=this.scheduler=null,this.pending=!1,(0,G.P)(n,this),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}}let $,W=1;const S={};function N(s){return s in S&&(delete S[s],!0)}const V={setImmediate(s){const t=W++;return S[t]=!0,$||($=Promise.resolve()),$.then(()=>N(t)&&s()),t},clearImmediate(s){N(s)}},{setImmediate:B,clearImmediate:k}=V,g={setImmediate(...s){const{delegate:t}=g;return(t?.setImmediate||B)(...s)},clearImmediate(s){const{delegate:t}=g;return(t?.clearImmediate||k)(s)},delegate:void 0};var _=i(6063);class p{constructor(t,e=p.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,n){return new this.schedulerActionCtor(this,t).schedule(n,e)}}p.now=_.l.now;class E extends p{constructor(t,e=p.now){super(t,e),this.actions=[],this._active=!1}flush(t){const{actions:e}=this;if(this._active)return void e.push(t);let n;this._active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}const F=new class tt extends E{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:n}=this;let o;t=t||n.shift();do{if(o=t.execute(t.state,t.delay))break}while((t=n[0])&&t.id===e&&n.shift());if(this._active=!1,o){for(;(t=n[0])&&t.id===e&&n.shift();)t.unsubscribe();throw o}}}(class q extends w{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t._scheduled||(t._scheduled=g.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,e,n=0){var o;if(null!=n?n>0:this.delay>0)return super.recycleAsyncId(t,e,n);const{actions:c}=t;null!=e&&(null===(o=c[c.length-1])||void 0===o?void 0:o.id)!==e&&(g.clearImmediate(e),t._scheduled=void 0)}});var A=i(4707),L=i(576);function M(s){return!!s&&(s instanceof T.y||(0,L.m)(s.lift)&&(0,L.m)(s.subscribe))}var z=i(9646);const H=new class nt extends E{}(class et extends w{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!=n&&n>0||null==n&&this.delay>0?super.requestAsyncId(t,e,n):(t.flush(this),0)}});var st=i(515),rt=i(2843),ot=i(7159),it=i(9841),ct=i(7579),ut=i(5363),U=i(8505),C=i(4482),I=i(5403),Q=i(8421),R=i(4671),D=i(5032),lt=i(7669),J=i(4004),at=i(262);function b(s){return(0,C.e)((t,e)=>{(0,Q.Xf)(s).subscribe((0,I.x)(e,()=>e.complete(),D.Z)),!e.closed&&t.subscribe(e)})}var ht=i(5698);function pt(s,t){return s===t}var vt=i(3099);function P(s){return"function"==typeof s.ngrxOnStoreInit}function Z(s){return"function"==typeof s.ngrxOnStateInit}const St=new r.OlP("@ngrx/component-store Initial State");let gt=(()=>{class s{constructor(e){this.destroySubject$=new A.t(1),this.destroy$=this.destroySubject$.asObservable(),this.stateSubject$=new A.t(1),this.isInitialized=!1,this.state$=this.select(n=>n),this.\u0275hasProvider=!1,e&&this.initState(e),this.checkProviderForHooks()}ngOnDestroy(){this.stateSubject$.complete(),this.destroySubject$.next()}updater(e){return n=>{let c,o=!0;const l=(M(n)?n:(0,z.of)(n)).pipe((0,ut.Q)(H),(0,U.b)(()=>this.assertStateIsInitialized()),function dt(...s){const t=(0,lt.jO)(s);return(0,C.e)((e,n)=>{const o=s.length,c=new Array(o);let d=s.map(()=>!1),l=!1;for(let u=0;u<o;u++)(0,Q.Xf)(s[u]).subscribe((0,I.x)(n,f=>{c[u]=f,!l&&!d[u]&&(d[u]=!0,(l=d.every(R.y))&&(d=null))},D.Z));e.subscribe((0,I.x)(n,u=>{if(l){const f=[u,...c];n.next(t?t(...f):f)}}))})}(this.stateSubject$),(0,J.U)(([u,f])=>e(f,u)),(0,U.b)(u=>this.stateSubject$.next(u)),(0,at.K)(u=>o?(c=u,st.E):(0,rt._)(u)),b(this.destroy$)).subscribe();if(c)throw c;return o=!1,l}}initState(e){(0,ot.x)([e],H).subscribe(n=>{this.isInitialized=!0,this.stateSubject$.next(n)})}setState(e){"function"!=typeof e?this.initState(e):this.updater(e)()}patchState(e){const n="function"==typeof e?e(this.get()):e;this.updater((o,c)=>({...o,...c}))(n)}get(e){let n;return this.assertStateIsInitialized(),this.stateSubject$.pipe((0,ht.q)(1)).subscribe(o=>{n=e?e(o):o}),n}select(...e){const{observablesOrSelectorsObject:n,projector:o,config:c}=function It(s){const t=Array.from(s);let e={debounce:!1};if(function bt(s){return typeof s.debounce<"u"}(t[t.length-1])&&(e={...e,...t.pop()}),1===t.length&&"function"!=typeof t[0])return{observablesOrSelectorsObject:t[0],projector:void 0,config:e};const n=t.pop();return{observablesOrSelectorsObject:t,projector:n,config:e}}(e);return(function xt(s,t){return Array.isArray(s)&&0===s.length&&t}(n,o)?this.stateSubject$:(0,it.a)(n)).pipe(c.debounce?function yt(){return s=>new T.y(t=>{let e,n;const o=new O.w0;return o.add(s.subscribe({complete:()=>{e&&t.next(n),t.complete()},error:c=>{t.error(c)},next:c=>{n=c,e||(e=F.schedule(()=>{t.next(n),e=void 0}),o.add(e))}})),o})}():s=>s,o?(0,J.U)(l=>n.length>0&&Array.isArray(l)?o(...l):o(l)):s=>s,function ft(s,t=R.y){return s=s??pt,(0,C.e)((e,n)=>{let o,c=!0;e.subscribe((0,I.x)(n,d=>{const l=t(d);(c||!s(o,l))&&(c=!1,o=l,n.next(d))}))})}(),function mt(s,t,e){let n,o=!1;return s&&"object"==typeof s?({bufferSize:n=1/0,windowTime:t=1/0,refCount:o=!1,scheduler:e}=s):n=s??1/0,(0,vt.B)({connector:()=>new A.t(n,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}({refCount:!0,bufferSize:1}),b(this.destroy$))}effect(e){const n=new ct.x;return e(n).pipe(b(this.destroy$)).subscribe(),o=>(M(o)?o:(0,z.of)(o)).pipe(b(this.destroy$)).subscribe(d=>{n.next(d)})}checkProviderForHooks(){F.schedule(()=>{if((0,r.X6Q)()&&(P(this)||Z(this))&&!this.\u0275hasProvider){const e=[P(this)?"OnStoreInit":"",Z(this)?"OnStateInit":""].filter(n=>n);console.warn(`@ngrx/component-store: ${this.constructor.name} has the ${e.join(" and ")} lifecycle hook(s) implemented without being provided using the provideComponentStore(${this.constructor.name}) function. To resolve this, provide the component store via provideComponentStore(${this.constructor.name})`)}})}assertStateIsInitialized(){if(!this.isInitialized)throw new Error(`${this.constructor.name} has not been initialized yet. Please make sure it is initialized before updating/getting.`)}}return s.\u0275fac=function(e){return new(e||s)(r.LFG(St,8))},s.\u0275prov=r.Yz7({token:s,factory:s.\u0275fac}),s})();class a extends gt{constructor(){super({first:0,second:0}),this.setProduct=this.updater((t,e)=>({...t,...e})),this.first$=this.select(({first:t})=>t),this.second$=this.select(({second:t})=>t),this.product$=this.select(({first:t,second:e})=>t*e)}}a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=r.Yz7({token:a,factory:a.\u0275fac});var X=i(102);class v{constructor(){this.first$=(0,r.f3M)(a).first$,this.second$=(0,r.f3M)(a).second$,this.product$=(0,r.f3M)(a).product$}}v.\u0275fac=function(t){return new(t||v)},v.\u0275cmp=r.Xpm({type:v,selectors:[["app-product"]],decls:4,vars:9,template:function(t,e){1&t&&(r._uU(0),r.ALo(1,"async"),r.ALo(2,"async"),r.ALo(3,"async")),2&t&&r.lnq("",r.lcZ(1,3,e.first$)," x ",r.lcZ(2,5,e.second$)," = ",r.lcZ(3,7,e.product$),"\n")},dependencies:[x.Ov],styles:["[_nghost-%COMP%]{display:block}"]});class m{constructor(){this.productStore=(0,r.f3M)(a),this.first$=this.productStore.first$,this.second$=this.productStore.second$}handleFirstChange(t){this.productStore.setProduct({first:+t.target.value})}handleSecondChange(t){this.productStore.setProduct({second:+t.target.value})}}m.\u0275fac=function(t){return new(t||m)},m.\u0275cmp=r.Xpm({type:m,selectors:[["app-ngrx-component-store"]],features:[r._Bn([a])],decls:18,vars:6,consts:[[1,"navigation"],["routerLink","/services"],["routerLink","/dependency-inject"],[1,"container"],["placeholder","first","type","number",3,"value","input"],["placeholder","second","type","number",3,"value","input"],["productComponent",""]],template:function(t,e){1&t&&(r.TgZ(0,"div",0)(1,"a",1),r._uU(2,"Previous"),r.qZA(),r.TgZ(3,"a",2),r._uU(4,"Next"),r.qZA()(),r.TgZ(5,"h1"),r._uU(6,"NgRx Component Store"),r.qZA(),r.TgZ(7,"p"),r._uU(8,"This solution is like using a Service + Subject, but has more boilerplate."),r.qZA(),r.TgZ(9,"div",3)(10,"input",4),r.NdJ("input",function(o){return e.handleFirstChange(o)}),r.ALo(11,"async"),r.qZA(),r._UZ(12,"br"),r.TgZ(13,"input",5),r.NdJ("input",function(o){return e.handleSecondChange(o)}),r.ALo(14,"async"),r.qZA(),r._UZ(15,"br")(16,"app-product",3,6),r.qZA()),2&t&&(r.xp6(10),r.Q6J("value",r.lcZ(11,2,e.first$)),r.xp6(3),r.Q6J("value",r.lcZ(14,4,e.second$)))},dependencies:[X.rH,v,x.Ov]});var $t=i(433);class h{}h.\u0275fac=function(t){return new(t||h)},h.\u0275mod=r.oAB({type:h}),h.\u0275inj=r.cJS({imports:[x.ez,$t.u5,X.Bz.forChild([{path:"",component:m}])]})}}]);